% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/genericRecodeOrchestrator.R
\name{process_country_bsi}
\alias{process_country_bsi}
\title{Process BSI data from raw format to EHR-BSI format for multiple countries}
\usage{
process_country_bsi(
  country,
  input_data,
  dictionary_path = NULL,
  value_maps_path = "reference/Lookup_Tables.r",
  metadata_path = NULL,
  commensal_path = NULL,
  reporting_year = as.numeric(format(Sys.Date(), "\%Y")),
  write_to_file = FALSE,
  write_to_file_path = NULL,
  return_format = "list",
  episode_duration = 14,
  calculate_episodes = TRUE
)
}
\arguments{
\item{country}{Country code ("MT" for Malta, "EE" for Estonia)}

\item{input_data}{Data frame containing the raw BSI data to be processed}

\item{dictionary_path}{Path to the data dictionary Excel file}

\item{value_maps_path}{Path to the value maps R script}

\item{metadata_path}{Path to the metadata Excel file for antibiotic recoding (Estonia only)}

\item{commensal_path}{Path to the commensal organisms CSV file}

\item{reporting_year}{Year for the DateUsedForStatistics field, defaults to current year}

\item{write_to_file}{Whether to write output files to disk}

\item{write_to_file_path}{Path for output files, defaults to working directory}

\item{return_format}{Whether to return "list" (default) or "separate" objects}

\item{episode_duration}{Duration for episode calculation in days, defaults to 14}

\item{calculate_episodes}{Whether to calculate episodes and aggregate results}
}
\value{
Returns a list containing the four EHR-BSI data tables: ehrbsi, patient, isolate, res
}
\description{
Process BSI data from raw format to EHR-BSI format for multiple countries
}
\examples{
\dontrun{
# Load Malta data
malta_data <- read.csv("Malta/data/raw/BSI_REPORT_Malta.csv")

# Process Malta data
result_malta <- process_country_bsi(
  country = "MT",
  input_data = malta_data,
  dictionary_path = "reference/dictionary_raw_BSI_Malta.xlsx",
  write_to_file = TRUE,
  write_to_file_path = "Malta/data/formatted"
)

# Load Estonia data
estonia_data <- readxl::read_xlsx("Estonia/data/raw/BSI_REPORT_2024_share.xlsx")

# Process Estonia data
result_estonia <- process_country_bsi(
  country = "EE",
  input_data = estonia_data,
  dictionary_path = "reference/dictionary_raw_BSI_Estonia.xlsx",
  metadata_path = "reference/MetaDataSet_57 (2025-03-13).xlsx",
  write_to_file = TRUE,
  write_to_file_path = "Estonia/data/formatted"
)
}
}
